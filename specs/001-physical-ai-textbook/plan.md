# Implementation Plan: Physical AI & Humanoid Robotics Textbook

**Branch**: `001-physical-ai-textbook-plan` | **Date**: 2025-12-06 | **Spec**: /specs/001-physical-ai-textbook/spec.md
**Input**: Feature specification from `/specs/001-physical-ai-textbook/spec.md`

**Note**: This template is filled in by the `/sp.plan` command. See `.specify/templates/commands/plan.md` for the execution workflow.

## Summary

This plan outlines the implementation for the Physical AI & Humanoid Robotics textbook, a Docusaurus v3 site deployed on GitHub Pages. The project focuses on generating and structuring content across four modules over a 13-week curriculum, ensuring technical accuracy, pedagogical clarity, and Docusaurus compatibility.

## Technical Context

**Language/Version**: Markdown, MDX, JavaScript/TypeScript (for Docusaurus config), Node.js (for build)
**Primary Dependencies**: Docusaurus v3 (Node.js/React framework), Context7 MCP Server
**Storage**: N/A (Static files)
**Testing**: Docusaurus build process, link validation (internal and external), content quality checks, MDX linting
**Target Platform**: Web (GitHub Pages for deployment)
**Project Type**: Static Documentation Site (Docusaurus)
**Performance Goals**: Fast page load times, optimized image delivery, efficient client-side navigation (Docusaurus defaults)
**Constraints**: GitHub Pages deployment limitations, static site generation, no backend/database, strict adherence to `constitution.md` regarding no runnable code examples/real APIs in content generation.
**Scale/Scope**: Four modules, 13 weeks of teaching material, numerous chapters, glossary, references

## Docusaurus Configuration Details

The `docusaurus.config.js` file will be configured with the following key settings:

*   **Required Fields**: `title`, `url`, `baseUrl`, `onBrokenLinks`, `onBrokenMarkdownLinks`, `favicon`, `organizationName`, `projectName`, `i18n`, `presets`, `themeConfig`.
*   **Site Metadata**:
    *   `title`: "Physical AI & Humanoid Robotics Textbook"
    *   `url`: `https://[organizationName].github.io`
    *   `baseUrl`: `/humanoid-robotic-book/` (critical for GitHub Pages to avoid 404s)
*   **GitHub Pages Deployment Settings**:
    *   `organizationName`: `[Your GitHub Organization/Username]`
    *   `projectName`: `humanoid-robotic-book`
    *   `deploymentBranch`: `gh-pages` (the branch where the built static site will be pushed)
    *   `trailingSlash`: `true` (recommended for GitHub Pages)
*   **Plugin Decisions**: Using `classic` preset (includes `docs`, `blog`, `pages`, `sitemap`). No immediate need for Google Analytics.
*   **MDX Configuration**: Default MDX support from Docusaurus `classic` preset.
*   **Syntax Highlighting Theme**: `dracula` (or a similar dark theme for code blocks).
*   **Navbar Structure**: Standard Docusaurus navbar with links to modules, glossary, and potentially external references.
*   **Footer Structure**: Standard Docusaurus footer with copyright and project links.
*   **Sidebar Generation Strategy**: Primarily `autogenerated` from the file system structure within the `docs/` folder, respecting `sidebar_position` and `slug` frontmatter.

## GitHub Pages Deployment Plan

Deployment will leverage GitHub Actions to automate the build and deployment process to GitHub Pages.

*   **GitHub Actions Workflow YAML**: A `.github/workflows/deploy.yml` file will be created.
*   **Exact Build + Deploy Steps**:
    1.  Checkout repository.
    2.  Setup Node.js (v18.x).
    3.  Install dependencies (`npm ci`).
    4.  Build Docusaurus static site (`npm run build`).
    5.  Deploy to GitHub Pages using `peaceiris/actions-gh-pages@v3` action, pushing the `build` directory content to the `gh-pages` branch.
*   **Branch Strategy**:
    *   `main` branch will host the source code of the Docusaurus project (Markdown, MDX, config files).
    *   `gh-pages` branch will be created and maintained by GitHub Actions, containing the compiled static assets for the website.
*   **`baseUrl` Correction**: The `baseUrl` in `docusaurus.config.js` will be set to `/humanoid-robotic-book/` to ensure correct asset loading on GitHub Pages.

## Context7 MCP Usage Strategy

Context7 MCP Server will be the authoritative source for Docusaurus-specific documentation and best practices.

*   **Which Docusaurus docs endpoints to query**: The agent will query Context7 for Docusaurus documentation, specifically endpoints related to configuration (`docusaurus.config.js`), content creation (MDX, frontmatter), styling, navigation, and deployment (`GitHub Pages`).
*   **When MCP fetches trigger**:
    *   **Module/Chapter Creation**: When new modules or chapters are being defined or created, MCP will be queried to ensure adherence to Docusaurus best practices for file structure, frontmatter, and content types.
    *   **MDX Validation**: During content generation, MCP will be used to verify correct MDX syntax, linking, and embedding of diagrams/conceptual code blocks.
    *   **Configuration & Deployment**: When setting up `docusaurus.config.js` or the GitHub Actions workflow, MCP will be consulted for correct patterns, deployment instructions, and troubleshooting.
*   **Conflict Resolution**: If Context7 documentation conflicts with existing text in project files, Context7's guidance will take precedence, and project files will be updated accordingly.
*   **Fetching Specific Information**: Context7 will be explicitly used to fetch details on:
    *   `docusaurus.config.js` structure and options.
    *   GitHub Pages deployment best practices for Docusaurus.
    *   Recommended MDX configurations and plugins.
    *   Sidebar generation strategies.
    *   Syntax highlighting themes.

## Acceptance Criteria

The following acceptance criteria define the successful completion of this feature, aligning with the project's constitution:

*   **AC-001**: The Docusaurus site builds successfully without any warnings or errors (`npm run build` output clean).
*   **AC-002**: The sidebar navigation correctly loads all four modules and their respective chapters, reflecting the `docs/` folder structure and weekly breakdown.
*   **AC-003**: All MDX files (chapters, glossary, etc.) pass ESLint rules for Markdown/MDX (`npx eslint . --ext md,mdx,js,ts,jsx,tsx`).
*   **AC-004**: There are no broken internal or external links, and no missing image assets (`npx docusaurus-check-links`).
*   **AC-005**: The textbook deploys successfully to GitHub Pages via GitHub Actions, and is publicly accessible at the specified URL (`https://[organizationName].github.io/humanoid-robotic-book/`).
*   **AC-006**: Context7 citations for Docusaurus best practices and technical details are embedded within footnotes or a dedicated references section in relevant planning/documentation artifacts.
*   **AC-007**: Each chapter strictly matches the required structure template (learning objectives, concept explanations, Mermaid diagrams, step-by-step tutorials, common errors & troubleshooting, hands-on exercise).
*   **AC-008**: All content (text, diagrams, conceptual code blocks) adheres to the "Zero Hallucination" principle, with technical accuracy verified through Context7 (for Docusaurus specific details) or general robotics/AI knowledge (for content).

## Acceptance Checks (Automated/Manual)

*   **Automated Checks (GitHub Actions)**:
    *   `npm install` (dependency installation)
    *   `npm run build` (Docusaurus build process, must exit with code 0)
    *   `npx docusaurus-check-links` (broken link detection)
    *   `npx eslint . --ext md,mdx,js,ts,jsx,tsx` (MDX/JS/TS linting)
    *   Deployment to `gh-pages` branch.
*   **Manual Checks**:
    *   Visual inspection of the deployed site for correct rendering, navigation, and overall aesthetic.
    *   Content review for pedagogical clarity, technical accuracy, and adherence to chapter standards.
    *   Verification of glossary completeness and consistency.

## Environment Setup

*   **Node.js Requirement**: The project requires Node.js **v18.x** or higher.
*   **Package Manager**: `npm` will be the sole package manager used.
*   **Lockfile Strategy**: `package-lock.json` will be used to ensure reproducible builds.

## File Naming Conventions

Strict adherence to the following naming conventions is required for consistency and Docusaurus compatibility:

*   **Folders**: All folders will use **kebab-case** (e.g., `02-module-1-ros2`, `00-introduction`).
*   **Module Folder Numbering**: Modules will be prefixed with two-digit numbers for explicit ordering (e.g., `00-introduction`, `01-quarter-overview`, `02-module-1-ros2`).
*   **Files**: All content files (`.md`, `.mdx`) will use a **numeric prefix + descriptive title** in kebab-case (e.g., `01-ros2-basics.md`, `02-ros2-nodes-and-topics.md`).
*   **Sidebar Item IDs**: Docusaurus will automatically generate sidebar item IDs from the file paths and `slug` frontmatter.
*   **Chapter Naming Rules**: Chapters within modules will follow the `numeric-prefix-descriptive-title.md` convention to maintain order and clarity.
*   **Image Location Strategy**: All image assets (PNG, JPG, SVG) will be stored in a centralized `static/img/` directory, and referenced using relative paths in MDX content.

## Content Generation Workflow

The content generation will strictly follow the Spec-Kit Plus â†’ Claude Code workflow:

1.  **Task Definition**: User defines a new chapter or content update.
2.  **Spec-Kit Spec Generation**: A granular Spec-Kit specification (e.g., `chapter-name.spec.md`) is created, outlining learning objectives, section outlines, diagrams, and content requirements.
3.  **Claude Code MDX Conversion**: Claude Code (the agent) will use the Spec-Kit spec as input to generate the MDX content for the chapter (`chapter-name.mdx`).
4.  **File Template for Each Chapter**: Chapters will utilize a consistent internal template, ensuring all mandatory sections (learning objectives, concept explanations, Mermaid diagrams, tutorials, troubleshooting, exercises) are present.
5.  **Metadata Fields**: Each generated chapter MDX file will include essential frontmatter: `title`, `slug`, `sidebar_position`.
6.  **MCP Verification**: Context7 MCP will be used during the MDX generation process to verify Docusaurus-specific syntax, frontmatter best practices, internal linking, and general content accuracy where Docusaurus documentation is relevant.
7.  **Content Accuracy**: For technical accuracy related to robotics and AI, the agent will rely on its knowledge base and, if necessary, suggest further research.

## Diagrams and Conceptual Code Blocks Strategy

The textbook will focus on conceptual explanations, Mermaid diagrams, and *descriptions* of code, aligning with the updated `constitution.md` which removed "runnable code examples" and "100% real APIs" from the content generation scope.

*   **ROS2 Example Execution Rules**: Instead of runnable code, the textbook will provide **conceptual code blocks** that illustrate ROS 2 concepts (e.g., Python `rclpy` code for nodes, topics, services). These blocks will be syntactically correct but not necessarily intended for direct execution within the textbook itself.
*   **Isaac Sim/Unity Diagram Generation**: Diagrams illustrating concepts, architectures, or robot kinematics will be generated using **Mermaid syntax** directly within MDX files. If screenshots or specific visual assets are required (e.g., of an Isaac Sim environment), they will be pre-generated externally and stored in `static/img/`, then referenced in the MDX.
*   **Python Environment Version**: Python **v3.9** or higher will be assumed for conceptual code blocks.
*   **Embedding Code Blocks in MDX**: Fenced code blocks (` ```python `) will be used, with the language explicitly specified for syntax highlighting.

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

| Violation | Why Needed | Simpler Alternative Rejected Because |
|-----------|------------|-------------------------------------|
| [e.g., 4th project] | [current need] | [why 3 projects insufficient] |
| [e.g., Repository pattern] | [specific problem] | [why direct DB access insufficient] |
